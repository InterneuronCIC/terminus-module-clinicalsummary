<!--BEGIN LICENSE BLOCK--> 
<!--Interneuron Terminus

Copyright(C) 2021  Interneuron CIC

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.If not, see<http://www.gnu.org/licenses/>. -->
<!--END LICENSE BLOCK--> 
<div >


  <div class="card">

    <div class="card-img-top bg-secondary text-white">

      <div class="row">
        <div class="col-md-6">
          <h5 style="margin-left: 10px;">
            Tasks
          </h5>
        </div>
      </div>

    </div>

    <div class="card-body table-responsive">

      <div class="row">
        <div class="col-md-6">
          <button class="btn btn-sm btn-default text-white" (click)="addTask()"  *ngIf="appService.AuthoriseAction('Edit Clinical Summary')">
              <!-- <i class="fa fa-plus"></i> -->
              <img src="assets/images/clinicalsummary/addicon.svg">
          </button>
        </div>
      </div>
      <br>

      <!-- <div>
        <ul class="list-group" *ngFor="let task_list of taskList">
          <li class="list-group-item list-group-item-action">
            <div class="border rounded bg-light" style="padding:5px; font-weight: bold;">
              <span class="text-dark"> {{task_list.taskname}}</span>
            </div>
            <div style="padding:5px;">
              <div class="row">
                <div class="col-md-2">
                  <strong>Task Details</strong><br />
                  {{task_list.taskdetails}}
                </div>
                <div class="col-md-1">
                  <strong>Priority</strong><br />
                  {{task_list.priority}}
                </div>
                <div class="col-md-2">
                  <strong>Due date </strong><br />
                  {{task_list.duedate | date : 'dd/MM/yyyy hh:mm'}}
                </div>
                <div class="col-md-2">
                  <strong>Allocated to</strong><br />
                  {{task_list.allocatedto}}
                </div>
                <div class="col-md-2">
                  <strong>Owner</strong><br />
                  {{task_list.owner}}
                </div>
                <div class="col-md-2">
                  <strong>Status</strong><br />
                  {{task_list.status}}
                </div>
                <div class="col-md-1">
                  <strong>Actions</strong><br />
                  <a href="javascript:void(0)" (click)="editTask(task_list.task_id)"><i class="fa fa-edit" title="Edit"></i></a><br>
                  <a href="javascript:void(0)" (click)="viewHistory(task_list.task_id)"><i class="fa fa-history" title="History"></i></a>
                </div>
              </div>
            </div>



          </li>
        </ul>
      </div> -->

      <p-table #dt1 [value]="taskList" styleClass="p-datatable-gridlines p-datatable-sm" responsiveLayout="scroll" [globalFilterFields]="['priority','duedate','status']">
              
        <ng-template pTemplate="header">
            <tr>
              <th>Task Name</th>    
              <th>Task Details</th>    
              <th pSortableColumn="priority">Priority <p-sortIcon field="priority"></p-sortIcon></th>    
              <th pSortableColumn="duedate">Due date <p-sortIcon field="duedate"></p-sortIcon></th>    
              <th>Allocated to</th>    
              <th>Owner</th>    
              <th pSortableColumn="status">Status <p-sortIcon field="status"></p-sortIcon></th>
              <th style="width: 8%;">Actions</th> 
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-task_list>
            <tr>
              <td>{{task_list.taskname}}</td>    
              <td>{{task_list.taskdetails}}</td>    
              <td>{{task_list.priority}}</td>    
              <td>{{task_list.duedate | date :'dd/MM/yyyy hh:mm'}}</td>    
              <td>{{task_list.allocatedto}}</td>    
              <td>{{task_list.owner}}</td>    
              <td>{{task_list.status}}</td>    
              <td style="width: 8%;">
                <a  *ngIf="appService.AuthoriseAction('Edit Clinical Summary')" href="javascript:void(0)" (click)="editTask(task_list.task_id)"><img src="assets/images/clinicalsummary/editIcon.svg"></a>&nbsp;
                <a href="javascript:void(0)" (click)="viewHistory(task_list.task_id)"><img src="assets/images/clinicalsummary/history.svg"></a>
              </td>   
            </tr>
        </ng-template>
    </p-table>

    </div>


  </div>

</div>